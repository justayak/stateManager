<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>StateManager</title>
    <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script src="stateManager.js"></script>
</head>
<body>
Hey
</body>
<script>

$(function(){

    State.setLogging(true);
    var loading = State.Manager.createState("loading");
    var game = State.Manager.createState("game");
    var test = game.createSubstate("subgame");
    loading.onStart = function(){
        State.Manager.setState("game");
    };

    game.onStart = function(){
        setTimeout(function(){
            game.setSubstate("subgame");
        },1000);
    };

    test.onStart = function(){
        console.log("YAA");
        setTimeout(function(){
            test.close();
            //game.closeSubstate();
        },1000);
    }


    State.Manager.setState("loading");

});

</script>
</html>